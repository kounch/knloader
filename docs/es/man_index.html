<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="description" content="Manual en castellano de knloader">
<meta name="keywords" content="Manual, Castellano, knloader, ZX Spectrum Next, BASIC, Lanzador">
<meta name="author" content="kounch">
<title>Manual de knloader</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sa {
  color: #000000;
  font-weight: bold;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Manual de knloader</h1>
<div class="details">
<span id="author" class="author">kounch</span><br>
<span id="email" class="email"><a href="mailto:kounch@users.noreply.github.com">kounch@users.noreply.github.com</a></span><br>
<span id="revnumber">version 1.1.0</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Índice</div>
<ul class="sectlevel1">
<li><a href="#_descripción">Descripción</a></li>
<li><a href="#_requisitos">Requisitos</a>
<ul class="sectlevel2">
<li><a href="#_descarga">Descarga</a></li>
<li><a href="#_requisitos_de_software">Requisitos de Software</a></li>
</ul>
</li>
<li><a href="#_instalación">Instalación</a>
<ul class="sectlevel2">
<li><a href="#_soporte_para_pzx">Soporte para PZX</a></li>
</ul>
</li>
<li><a href="#_uso">Uso</a></li>
<li><a href="#_formato_del_archivo_de_datos">Formato del archivo de datos</a>
<ul class="sectlevel2">
<li><a href="#_códigos_de_referencia_de_los_modos_de_carga">Códigos de referencia de los modos de carga</a></li>
<li><a href="#_ejemplos">Ejemplos</a></li>
</ul>
</li>
<li><a href="#_script_de_creación_de_bdt">Script de creación de BDT</a></li>
<li><a href="#_script_de_creación_de_caché">Script de creación de Caché</a></li>
<li><a href="#_programa_autoexec_en_nextbasic">Programa Autoexec en NextBASIC</a></li>
<li><a href="#_notas">Notas</a></li>
<li><a href="#_copyright">Copyright</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_descripción">Descripción</h2>
<div class="sectionbody">
<div class="paragraph">
<p>¿Tiene usted un ZX Spectrum Next, pero está cansado de tener que recordar cuál es la mejor opción para lanzar sus programas? Entonces knloader puede ser la solución.</p>
</div>
<div class="paragraph">
<p>Este es un conjunto de programas NextBASIC que se pueden configurar para recordar, y entonces utilizar, el método preferido para lanzar otros programas (Modo Next/+3e, Modo 128K, USR 0, etc.). Como extra, además se pueden utilizar imágenes (como carátulas de juegos o pantallas de carga).</p>
</div>
<div class="paragraph">
<p>Estos programas no reemplazan el programa Browser incorporado, ni ofrecen otra función que no sea lanzar otros programas.</p>
</div>
<div class="paragraph">
<p>Página web oficial: <a href="https://kounch.github.io/knloader/" class="bare">https://kounch.github.io/knloader/</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_requisitos">Requisitos</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_descarga">Descarga</h3>
<div class="paragraph">
<p>Se puede obtener un fichero ZIP con la última versión siguiendo <a href="https://github.com/kounch/knloader/releases/latest">este enlace</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_requisitos_de_software">Requisitos de Software</h3>
<div class="ulist">
<ul>
<li>
<p><strong>NextZXOS (versión 1.3.2)</strong>. Documentos, descargas, etc. <a href="https://www.specnext.com/latestdistro/">aquí</a>.</p>
</li>
<li>
<p><strong>Python (versión 3.6 o superior)</strong>, opcionalmente, para usar los scripts incluídos de creación de BDT y de datos de caché. Documentación, descarga, etc. <a href="https://www.python.org/">aquí</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_instalación">Instalación</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Crear un archivo <code>knloader.bdt</code> con un programa editor de texto o con el script incluido y, opcionalmente, crear datos de caché (leer a continuación para más instrucciones).</p>
</div>
<div class="paragraph">
<p>Copiar, juntos, <code>knloader.bas</code>, <code>knlauncher</code>, <code>knzml</code>, desde una de las carpetas de idioma de la distribución (<code>en</code> en inglés, <code>es</code> para castellano, etc.), y el nuevo archivo <code>knloader.bdt</code> o los datos de caché al lugar que se desee de la tarjeta SD.</p>
</div>
<div class="sect2">
<h3 id="_soporte_para_pzx">Soporte para PZX</h3>
<div class="paragraph">
<p>A partir de la versión 1.1.0, se pueden cargar también ficheros PZX con knloader, pero esto requiere la instalación previa de un fichero ( <code>pzx2wav</code> <a href="http://zxds.raxoft.cz/pzx.html">de PZX Utilites</a>) a la tarjeta microSD de la Raspberry Pi aceleradora, dentro de alguno de los <a href="https://gitlab.com/thesmog358/tbblue/-/blob/master/rpi/linux/docs/CLI.txt">directorios para comandos personalizados</a>.</p>
</div>
<div class="paragraph">
<p>Para facilitar esta tarea, se incluye un instalador hecho con NextBASIC, que es capaz de instalar o desinstalar <code>pzx2wav</code> en <code>/NextPi/nextpi</code> en al tarjeta microSD de la Pi. Esta instalación sólo se tiene que hacer una vez, ya que es persistente entre reinicios.</p>
</div>
<div class="paragraph">
<p>Copiar juntos <code>pzxinstall.bas</code> y <code>pzx2wav</code> al lugar que se desee de la tarjeta SD del ZX Spectrum Next. Ejecutar <code>pzxinstall.bas</code> con el navegador de NezxZXOS y seguir las instrucciones en la pantalla.</p>
</div>
<div class="paragraph">
<p>Una vez instalado, se pueden borrar <code>pzxinstall.bas</code> y <code>pzx2wav</code> de la tarjeta SD.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>pzxinstall.bas</code> también puede, si se desea, borrar (desinstalar) <code>/NextPi/nextpi/pzx2wav</code> de la tarjeta microSD de la Pi aceleradora.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Una vez que <code>pzx2wav</code> se ha instalado, también se puede hacer que el navegador por defecto de ZX Spectrum Next cargue ficheros PZX.</p>
</div>
<div class="paragraph">
<p>Lo único que hay que hacer es guardar una copia del archivo <code>c:/neztzxos/tzxload.bas</code> como <code>c:/nextzxos/pzxload.bas</code> y luego reemplazar las siguientes líneas con este código:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="basic">(...)
 690   PAUSE 100:LET g$="-c cp """+f$+""" /ram/file.pzx"
 700   .$ pisend g$
 710   PAUSE 50
 720   LET g$="-c pzx2wav -o /ram/out.wav /ram/file.pzx"
(...)
1830   IF n$&lt;&gt;o$ THEN g$=f$:f$=f$( TO LEN f$- LEN o$-4)+n$+".pzx": MOVE g$ TO f$
(...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Opcionalmente, se pueden modificar las líneas <code>330</code> y <code>450</code> cambiando <code>TZX</code> por <code>PZX</code>.</p>
</div>
<div class="paragraph">
<p>Por último, modificar <code>c:/neztzxos/browser.cfg</code> añadiendo esta línea nueva:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>PZX:clear 65367:load "pzxload.bas":f$="|":adj=1:goto 1</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_uso">Uso</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Acceder usando el programa Browser, o con otro método, hasta la carpeta donde están <code>knloader.bas</code>, <code>knlauncher</code>, <code>knzml</code> y <code>knloader.bdt</code>. Cargar <code>knloader.bas</code>.</p>
</div>
<div class="paragraph">
<p>En la primera ejecución, si no existieran, se crearán archivos de caché desde la información del archivo de datos <code>knloader.bdt</code>.</p>
</div>
<div class="paragraph text-center">
<p><span class="image"><img src="../img/FirstBoot.png" alt="FirstBoot"></span></p>
</div>
<div class="paragraph">
<p>La interfaz principal muestra una lista de los programas encontrados en el archivo de datos.</p>
</div>
<div class="paragraph text-center">
<p><span class="image"><img src="../img/CoverOff.png" alt="CoverOff"></span></p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Se pueden utilizar las teclas de cursor o un joystick compatible (modo Kempston o MD) para moverse y elegir el programa a cargar. Entonces, pulsar <code>ENTER</code>, <code>0</code> o el botón del joystick para ejecutarlo.</p>
</div>
<div class="paragraph text-center">
<p><span class="image"><img src="../img/LoadDetails.png" alt="LoadDetails"></span></p>
</div>
<div class="paragraph">
<p>Después de unos instantes, el programa debería cargarse usando el modo deseado.</p>
</div>
<div class="paragraph text-center">
<p><span class="image"><img src="../img/knlauncher.png" alt="knlauncher"></span></p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Si se han introducido cambios en el archivo de datos, pulsar R para reconstruir la caché con la nueva información.</p>
</div>
<div class="paragraph">
<p>Pulsar C o el botón secundario del joystick (en modo MD ) para ocultar o mostrar las imágenes.</p>
</div>
<div class="paragraph text-center">
<p><span class="image"><img src="../img/CoverOn.png" alt="CoverOn"></span></p>
</div>
<div class="paragraph">
<p>Pulsar A para activar o desactivar el guardado automático del programa seleccionado y la opción de ocultar o mostrar imágenes.</p>
</div>
<div class="paragraph">
<p>Pulsar X o el tercer botón del joystick para salir del programa.</p>
</div>
<div class="paragraph">
<p>Pulsar H para mostrar una pequeña ayuda (en inglés).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_formato_del_archivo_de_datos">Formato del archivo de datos</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La base de datos principal se almacena en un archivo de texto (codificación ANSI, sin acentos u otros caracteres similares), que se ha de llamar <code>knloader.bdt</code>, y que debe estar en el mismo directorio en el que esté <code>knloader.bas</code> en la tarjeta SD. El archivo de datos se puede crear de forma manual, o bien utilizando el script <code>bdt_builder.py</code> incluído.</p>
</div>
<div class="paragraph">
<p>El fichero BDT tiene un tamaño máximo de 16384 bytes si los archivos de cache se crean en el ZX Spectrum Next. Este límite no existe cuando los archivos de cache se crean de forma externa, por ejemplo, usando el script <code>cache_builder.py</code>.</p>
</div>
<div class="paragraph">
<p>Todas las rutas que se indiquen deben usar <code>/</code> como separador para indicar directorios. El uso de <code>\</code> no está soportado.</p>
</div>
<div class="paragraph">
<p>La primera linea del archivo ha de ser la ruta principal de la SD desde la que empezar a buscar programas (por ejemplo: <code>/Juegos</code> o <code>D:/</code>). No debe exceder los 128 caracteres de longitud.</p>
</div>
<div class="paragraph">
<p>A partir de la segunda, cada línea debe ser según el siguiente formato:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>Nombre,Modo de carga,&lt;Directorio&gt;,Archivo,&lt;Archivo de Imagen&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Donde cada uno de los campos entre ',' son de la siguiente manera:</p>
</div>
<div class="paragraph">
<p><strong><code>Nombre</code></strong>: Nombre a mostrar en la interfaz (máximo de 22 caracteres, las comas <code>,</code> no están permitidas)</p>
</div>
<div class="paragraph">
<p><strong><code>Modo de carga</code></strong>: Un número indicando cómo cargar el archivo de programa. Véase la tabla a continuación</p>
</div>
<div class="paragraph">
<p><strong><code>Directorio</code></strong>: (Opcional) Subdirectorio donde se encuentran <code>Archivo</code> y <code>Archivo de Imagen</code> (máximo de 64 caracteres, las comas <code>,</code> no están permitidas)</p>
</div>
<div class="paragraph">
<p><strong><code>Archivo</code></strong>: Nombre del archivo a ejecutar (máximo 64 caracteres, las comas <code>,</code> no están permitidas). Si se elige el modo 8 (DSK con arranque personalizado), debe contener el nombre, tanto del archivo DSK, como el del archivo a ejecutar de dentro de la imagen de disco, separados por <code>:</code> (por ejemplo: <code>Bounder.dsk:BOUNDER.BAS</code>)</p>
</div>
<div class="paragraph">
<p><strong><code>Archivo de imagen</code></strong>: (Opcional) Nombre (máximo 64 caracteres, las comas <code>,</code> no están permitidas) de una imagen de pantalla completa para mostrar por debajo del listado de programas. Puede ser en el formato SCR, SLR, SHC, SL2 o BMP. En el caso de BMP, este ha de ser de 256x192 píxeles, 256 colores, usando la paleta de color de Next y sin información del espacio de color.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_códigos_de_referencia_de_los_modos_de_carga">Códigos de referencia de los modos de carga</h3>
<div class="literalblock">
<div class="content">
<pre>0  - 3DOS (Next)
1  - TAP
2  - TZX (rápido)
3  - DSK (auto arranque)
4  - TAP (USR 0)
5  - TZX (USR0 - rápido)
6  - TAP (Next)
7  - TZX (Next - rápido)
8  - DSK (arranque personalizado)
9  - TAP (PI Audio)
10 - TZX
11 - TAP (USR 0 - PI Audio)
12 - TZX (USR 0)
13 - TAP (PI Audio - Next)
14 - TZX (Next)
15 - NEX (Next)
16 - Snapshot
17 - Programa de Z-Machine (Next)
18 - 3DOS
19 - TAP (48K)
20 - TZX (48K - rápido)
21 - TAP (48K - Pi Audio)
22 - TZX (48K)
23 - TAP (LOAD "" CODE)
24 - TZX (LOAD "" CODE - rápido)
25 - TAP (LOAD "" CODE - USR 0)
26 - TZX (LOAD "" CODE - USR0 - rápido)
27 - TAP (LOAD "" CODE - USR 0 - PI Audio)
28 - TZX (LOAD "" CODE - USR 0)
29 - TAP (LOAD "" CODE - 48K)
30 - TZX (LOAD "" CODE - 48K - rápido)
31 - TAP (LOAD "" CODE - PI Audio - 48K)
32 - TZX (LOAD "" CODE - 48K)
33 - PZX (rápido)
34 - PZX (USR0 - rápido)
35 - PZX (Next - rápido)
36 - PZX
37 - PZX (USR 0)
38 - PZX (Next)
39 - PZX (48K - rápido)
40 - PZX (48K)
41 - PZX (LOAD "" CODE - rápido)
42 - PZX (LOAD "" CODE - USR0 - rápido)
43 - PZX (LOAD "" CODE - USR 0)
44 - PZX (LOAD "" CODE - 48K - rápido)
45 - PZX (LOAD "" CODE - 48K)</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Los modos audio, TZX y PZX necesitan un ZX Spectrum Next Accelerated para poder funcionar.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Salvo que se indique lo contrario (por ej. en los modos 6, 7), todos los modos configuran el ZX Spectrum Next en modo 128K, deshabilitando el hardware especial de  Next.</p>
</div>
<div class="paragraph">
<p>Todos los modos TZX y PZX (rápido), se ejecutan a 14 MHz. Una vez que el programa haya cargado, se puede volver a la velocidad de 3,5MHz desde el menú NMI, o pulsando NMI y 8 a la vez.</p>
</div>
<div class="paragraph">
<p>El modo 3 DSK (auto arranque) monta el archivo DSK en la unidad <code>A:</code> y ejecuta <code>LOAD "*"</code>.</p>
</div>
<div class="paragraph">
<p>El modo 8 DSK (arranque personalizado) monta el archivo DSK en la unidad <code>A:</code> y ejecuta <code>LOAD "archivo"</code>, donde <code>archivo</code>, se obtiene desde el campo <code>Archivo</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_ejemplos">Ejemplos</h3>
<div class="paragraph">
<p>Estas son todas líneas con un formato válido:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>Albatrossity,1,,Albatrossity.tap

Alter Ego,4,Alter Ego,Alter Ego.tap

Altered Beast,3,Altered Beast,Altered Beast.dsk,Altered Beast.bmp

Astronut,16,../Next/,Astronut.snx</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pero estas otras, no:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>Albatrossity,,,Albatrossity.tap</code></pre>
</div>
</div>
<div class="paragraph">
<p>(falta el código del modo de carga)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>,1,,Albatrossity.tap</code></pre>
</div>
</div>
<div class="paragraph">
<p>(falta el nombre)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>Albatrossity,1,,</code></pre>
</div>
</div>
<div class="paragraph">
<p>(falta el archivo)</p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Ejemplo de archivo de datos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>C:/all/Games
Albatrossity,1,,Albatrossity.tap
Alter Ego,4,Alter Ego,Alter Ego.tap
Altered Beast,3,Altered Beast,Altered Beast.dsk,Altered Beast.bmp
Amaurote,2,Amaurote,Amaurote.tzx
Aquanoids,34,Aquanoids,Aquanoids.pzx
Auf Wiedersehen Monty,10,Auf Wiedersehen Monty,Auf Wiedersehen Monty - 128k.tzx
Astronut,16,../Next/,Astronut.snx
Barbarian: El Guerreo Definitivo,0,Barbarian/3DOS,BARB.BAS,../Barbarian.bmp
Batty,9,Batty,Batty.tap,
Bounder,8,Bounder,Bounder.dsk:BOUNDER.BAS
Autoestopista Galactico,17,../Z-Machine,hitchhiker-r60-s861002.z3</code></pre>
</div>
</div>
<div class="paragraph">
<p>Así, según este último ejemplo, al elegir <code>Barbarian: El Guerrero</code> en la interfaz de usuario, el programa intentará cargar <code>/all/Games/Barbarian/3DOS/BARB.BAS</code>, y tambén mostrará la imagen que se encuentra en <code>/all/Games/Barbarian/Barbarian.bmp</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_script_de_creación_de_bdt">Script de creación de BDT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Este script intenta analizar el contenido de un directorio (incluidos subdirectorios), buscando archivos de ZX Spectrum Next y archivos de imagen, y luego crear un nuevo fichero BDT con los datos obtenidos. El script necesita Python (versión 3.6 o posterior) para poder ejecutarse.</p>
</div>
<div class="paragraph">
<p>Tiene un poco de inteligencia y, cuando se encuentre varios archivos con el mismo nombre pero distinta extensión (nex, snx, tap, etc.), elige sólo uno de ellos, según la siguiente prioridad:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>nex &gt;  snx &gt; tap &gt; bas &gt; dsk &gt; p &gt; tzx &gt; pzx &gt; z8 &gt; z5 &gt; z3 &gt; z80</pre>
</div>
</div>
<div class="paragraph">
<p>El modo de carga por defecto para cada uno de estos tipos de archivo es el siguiente:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extensión</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>15</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>snx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>16</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bas</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dsk</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>p</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>16</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tzx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pzx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>33</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>z8</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>17</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>z5</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>17</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>z3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>17</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>z80</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>16</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Así mismo, si se encuentran varios archivos de imagen pero con distinta extensión, se elige solo uno según esta prioridad:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>bmp &gt; sl2 &gt; scr &gt; slr &gt; shr &gt; shc</pre>
</div>
</div>
<div class="paragraph">
<p>Modo de uso: <code>python3 bdt_builder.py -i RUTA [-o FICHERO] [-c RUTA_SD] [--tap NUMERO] [--tzx NUMERO] [--pzx NUMERO] [--bas NUMERO]</code></p>
</div>
<div class="paragraph">
<p>Donde <code>RUTA</code> es la ruta al directorio a analizar, <code>FICHERO</code>, opcionalmente, es la ruta al fichero BDT a crear. Si no se indica ruta al fichero, este se crea automáticamente en el directorio actual. Finalmente, <code>RUTA_SD</code>, opcionalmente también, es la ruta de la SD donde se encuentran los programas (primera línea del archivo BDT). Si no se indica un ruta de la SD, se usa <code>RUTA</code> en su lugar.</p>
</div>
<div class="paragraph">
<p>Por defecto, el script considera cada nombre de archivo encontrado (sin extensión) como un programa distinto a catalorar. Sin embargo, se puede cambiar este comportamiento para usar el del directorio que lo contiene, y entonces considerar todos los ficheros adecuados de su interior como el mismo programa, sin importar qué nombre tengan. Para activar esta característica, hay que añadir <code>-t d</code> al comando, de esta manera: <code>python3 bdt_builder.py -i RUTA -t d [-o FICHERO] [-c RUTA_SD]</code></p>
</div>
<div class="paragraph">
<p>Además, el script ordena en base al nombre (lexicográficamente) todos los resultados. Si se prefiera que se ordenen los resultados en base al nombre del archivo (orden ASCII), se puede utilizar <code>-u</code> (por ej: <code>python3 bdt_builder.py -u -i RUTA &#8230;&#8203;</code>).</p>
</div>
<div class="paragraph">
<p>Se puede cambiar el modo de carga por defecto para las extensions <code>tap</code>, <code>tzx</code>, <code>pzx</code> o <code>bas</code>, usando <code>--tap NUMERO</code>, <code>--tzx NUMERO</code>, <code>--pzx NUMERO</code> o <code>--bas NUMERO</code>, con el número de modo deseado. Por ejemplo, para cambiar el modo de carga de ficheros tap a USR 0: <code>python3 bdt_builder.py -i RUTA --tap 4 &#8230;&#8203;</code></p>
</div>
<div class="paragraph">
<p>Una vez que se ha creado el fichero BDT, se puede revisar y retocar con un editor de texto, y luego copiarlo a la tarjeta SD, en la misma ubicación en la que se encuentre <code>knloader.bas</code>, o se pueden crear datos de cache (usando el Script de creación de Caché) y copiar estos en la tarjeta.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_script_de_creación_de_caché">Script de creación de Caché</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Estos programan utilizan uno o más archivos de caché en <code>/tmp/knloader</code>, lo que es necesario para que la ejecución del programa sea a una velocidad adecuada. Puede dejar que <code>knloader.bas</code> cree la caché de forma automática en su primera ejecución (o pulsando la tecla <code>R</code>), o puede crearlos de forma externa usando el script <code>cache_builder.py</code> incluido. Este necesita Python (versión 3.6 o posterior) para poder usarse.</p>
</div>
<div class="paragraph">
<p>Se usa un fichero de cache por cada banco de memoria RAM (16K) que el programa utiliza, y, en un banco, se puede llegar a guardar un máximo de datos de 74 programas. Esto quiere decir que, como mucho, se pueden gestionar 2590 programas con un ZX Spectrum Next básico (1MiB de memoria RAM) o 7326 programs en el caso de un ZX Spectrum Next con la memoria expandida (2 MiB de RAM).</p>
</div>
<div class="paragraph">
<p>Uso del script: <code>python3 cache_builder.py -i FICHERO [-o RUTA]</code></p>
</div>
<div class="paragraph">
<p>Donde <code>FICIHERO</code> es la ruta al fichero BDT y <code>RUTA</code>, opcionalmente, es la ruta al directorio donde crear los datos de caché. Si no se indica ruta de destino, estos se crean automáticamente en el directorio actual.</p>
</div>
<div class="paragraph">
<p>Una vez que los ficheros de caché se han creado, ha de copiarlos a la tarjeta SD en el directorio <code>/tmp/knloader</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_programa_autoexec_en_nextbasic">Programa Autoexec en NextBASIC</h2>
<div class="sectionbody">
<div class="paragraph">
<p>También se incluye un pequeño programa <code>autoexec.bas</code> que se puede utilizar para que se inicie knloader de forma automática cada vez que se encienda el ZX Spectrum Next.</p>
</div>
<div class="paragraph">
<p>Para utilizarlo, renombre el fichero <code>/nextzxos/autoexec.bas</code> de la tarjeta SD a <code>/nextzxos/autoexec.old</code>, y luego copie el fichero <code>autoexec.bas</code> del direcotrio <code>utils</code> a <code>/nextzxos</code> en la tarjeta SD. Copie también todos los ficheros de knloader (<code>knloader.bas</code>, <code>knlauncher</code>, <code>knzml</code> y BDT file), desde una de las carpetas de idioma de la distribución (<code>en</code> en inglés, <code>es</code> para castellano, etc.), en un directorio llamado <code>/knloader/</code> en la raíz de la SD.</p>
</div>
<div class="paragraph">
<p>Como extra, puede usar las siguientes teclas en el inicio para cambiar el comportamiento del arranque:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pulse <code>A</code> o el botón principal del joystick (modo Kempston o MD) para lanzar el fichero <code>autoexec.bas</code> original que se renombró como <code>autoexec.bas.bak</code></p>
</li>
<li>
<p>Pulse Espacio o el botón secundario del joystick para iniciar el programa Browser de ZX Spectrum Next en vez de knloader</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notas">Notas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Estos programas crean un archivo de preferencias llamado <code>opts.tmp</code> en la misma carpeta donde se encuentre <code>knloader.bas</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_copyright">Copyright</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright (c) 2020-2022 kounch</p>
</div>
<div class="paragraph">
<p>PZX&#8594;WAV convertor Copyright &#169; 2007 Patrik Rak</p>
</div>
<div class="paragraph">
<p>Parte del código utilizado para lanzar programas ha sido adaptado desde la distribución oficial de NextZXOS (concretamente de <code>browser.cfg</code>, <code>tapload.bas</code> y <code>tzxload.bas</code>).</p>
</div>
<div class="paragraph">
<p><strong><em>Spectrum Next</em></strong> y <strong><em>System/Next</em></strong> son © <strong>SpecNext Ltd</strong>.</p>
</div>
<div class="paragraph">
<p>Permission to use, copy, modify, and/or distribute this software for any purpose with or without fee is hereby granted, provided that the above copyright notice and this permission notice appear in all copies.</p>
</div>
<div class="paragraph">
<p>THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.1.0<br>
Last updated 2022-04-11 15:01:36 +0200
</div>
</div>
</body>
</html>
